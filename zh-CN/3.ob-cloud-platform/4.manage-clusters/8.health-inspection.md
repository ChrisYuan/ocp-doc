健康巡检 
=========================

在健康巡检页面单击右上方的 发起巡检，您可在页面中查看巡检基本信息和巡检结果列表。

**巡检基本信息** 
-------------------------------

您可查看最近一次巡检时间和巡检结果分类，巡检结果分为三类，包括： **严重指标、警告指标** 和 **健康指标** 。

![image.png](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6772988061/p199889.png "image.png")

**巡检结果列表** 
-------------------------------

您可在巡检结果列表页筛选或查看巡检模块，查看 **巡检指标、健康状态、巡检结果描述** 和 **巡检时间** 。

![image.png](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6772988061/p199890.png "image.png")


| **参数** |                           **说明**                           |
|--------|------------------------------------------------------------|
| 巡检模块   | 包括：集群、主机、OB_SERVER 和 OB_PROXY。                             |
| 巡检指标   | 对集群、主机、OB_SERVER 和 OB_PROXY 的各项指标进行了详细说明，参见下文 **巡检指标** 表格。 |
| 健康状态   | 包括：严重、警告和健康。                                               |
| 巡检结果描述 | 对主机、集群、OBProxy、zone、OBServer 等情况进行描述。                      |
| 巡检时间   | 显示巡检发起时的时间，如：2020年11月27日 17:04:00。                         |



**导出巡检报告** 
-------------------------------

单击页面右上方 **导出巡检报告** ，下载当前巡检报告。![21](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7772988061/p200744.png)



**巡检指标** 
-----------------------------

### 集群指标 



|      **巡检指标**       |                                                                                                   **子指标项**                                                                                                    |                                                                                                                             **巡检结果示例**                                                                                                                              |
|---------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| cluster_status 集群状态 | status：集群运维状态 compaction status ：集群合并状态                                                                                                                                                       | 运维状态：运行中, 健康 合并状态：超时，警告                                                                                                                                                                                                                             |
| zone_status zone 状态 | operation status：zone 的运维状态 compaction status：zone 的合并状态                                                                                                                                      | zone：zone1 zone 状态：创建中，警告 zone 合并状态：合并中, 健康 zone：zone2 zone 状态：运行中，健康 zone 合并状态：合并中, 健康 zone：zone3 zone 状态：运行中，健康 zone 合并状态：合并中, 健康 |
| alarm               | Stopped event count：停服级别告警数 Critical event count：严重级别告警数 Warning event count：警告级别告警数 Caution event count：注意级别告警数 Reminder event count：提醒级别告警数 | 停服告警个数：1， 大于0，严重 严重告警个数：1，大于0，严重 警告告警个数：1，大于0，警告 只显示个数大于0的告警级别。                                                                                                                                                     |



### 主机指标 



|                 **指标组**                  |                                           **指标项**                                           |                                                                                                                                     **结果描述**                                                                                                                                     |
|------------------------------------------|---------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| host_status  主机状态        | status：主机状态 agent_status: 主机上 agent 的状态                                     | 主机：192.168.1.1 主机状态：在线, 健康 Agent状态：下线，严重/部署中，警告部署中，警告/线，健康线，健康                                                                                                                                                                                   |
| host_disk_status  主机磁盘状态 | host_disk_used_percent：磁盘分区已使用百分比。 host_disk_used：磁盘分区已使用量。 | 主机：192.168.1.1 /dev/sta, 已使用大小2.5T， 使用半分比90% \> 85%, 严重 /dev/sta, 已使用大小1.6T，使用百分比95% \> 85%, 严重 主机：192.168.1.1 /dev/sta, 已使用大小2.5T, 使用半分比90% \> 85%, 严重 /dev/sta, 已使用大小1.6T, 使用半分比95% \> 85%, 严重 |



### OBServer 指标 



|          **指标组**          |                              **指标项**                               |                                                 **结果描述**                                                  |
|---------------------------|--------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|
| server_status             | server status：运维状态                                                 | OBServer：192.168.1.1 运维状态：停止中，警告                                                          |
| ob_server_disk_status     | disk_in_bytes_used：磁盘字节已使用 disk_used_percent：资盘使用率 | OBServer：192.168.1.1 磁盘已使用：2G 磁盘使用率：85%, 大于72%，严重/70%, 健康 |
| ob_server_partition_count | partition_count：分区副本总数                                             | OBServer：192.168.1.1 分区副本数：30010, 大于300x00，严重/20010, 健康                                   |





### OBPorxy 指标 



|         **指标组**          |                                                     **指标项**                                                     |                                                           **结果描述**                                                            |
|--------------------------|-----------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| obproxy_status           | status：运行状态                                                                                                     | 集群名：obproxy, 地址： 192.168.1.1 状态(status)：不可用(UNAVAILABLE), 严重/重启中(RESTARTING), 警告                              |
| obproxy_connection_count | client_session_count ：OBProxy 和客户端之间的连接数 totol_session_count： 单个 OBProxy 的全部连接数 | 集群名：obproxy, 地址：120.24.12.12 客户端连接数：110, 小于8000, 健康,  总连接数：110, 小于58000，健康/58500, 大于58000, 严重 |



